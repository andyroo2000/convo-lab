# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## Unreleased

### Added

- **[test]** Comprehensive upgrade prompt test coverage for all content creation flows (24 tests total across DialogueGenerator, CourseGenerator, NarrowListeningCreatorPage, PISetupPage, and ChunkPackSetupPage)
- **[feat]** Upgrade prompts when quota limits reached - implemented modal prompts that automatically appear when users hit their generation quotas; integrated into dialogue and course generators; captures quota metadata (used, limit, resetsAt) from 429 error responses; free tier users see lifetime limit messaging with upgrade CTA; paid tier users see monthly reset info; includes e2e test infrastructure improvements (seed script, port fixes, dotenv config)
- **[test]** Updated quota-system e2e tests for tier-based quotas - modified e2e tests to reflect new tier-based quota system with lifetime per-content-type limits for free tier (2 dialogues) instead of weekly limits; updated test assertions to use flexible regex patterns instead of hardcoded values; skipped tests not applicable to free tier (80-89% usage range, quota reset dates); updated error message assertions from "Weekly quota exceeded" to "Quota exceeded"
- **[feat]** Tier-based quota system with lifetime and monthly limits - implemented differentiated quota system for free and paid tiers; free tier has lifetime per-content-type limits (2 dialogues + 1 audio course); paid tier has 30 generations per month combined across all content types; admin users have unlimited access; converted rateLimitGeneration to factory function accepting contentType parameter; updated all route handlers to use new factory pattern; added 39 comprehensive unit tests for quota system; updated integration tests for new quota behavior; updated error messages to be tier-agnostic
- **[feat]** Monthly date utilities for paid tier quota management - added getMonthStart and getNextMonthStart functions to support monthly quota cycle (30 generations per month, resetting on 1st of each month); functions handle month boundaries, year transitions, leap years, and all edge cases; added 26 comprehensive tests covering mid-month scenarios, year boundaries, leap years, and all 12 months validation
- **[feat]** MVP UX improvements for pricing and language selection - replaced "Native Language" with "Primary Language" throughout UI (onboarding and settings); removed country flags from language selection in favor of text-only names (e.g., "Japanese", "Spanish") for a more inclusive design; updated all pricing displays to reflect $10/month with 30 generations per month for paid tier and "2 dialogues + 1 audio course (lifetime)" for free tier; changed quota reset messaging from weekly to monthly cycles
- **[docs]** MVP content topics and pricing decisions - finalized 3 dialogue topics (Meeting Someone New, At a Café/Restaurant, Making Weekend Plans) and 1 audio course topic (Travel & Transportation) for pre-generated sample content; set paid tier pricing at $10/month with 30 items per month; defined free tier limits (2 dialogues + 1 audio course lifetime); decided to replace "native language" terminology with "Primary Language" and remove country flags in favor of language names only
- **[chore]** Beads issue tracking system for MVP planning - initialized Beads as a persistent, git-backed issue tracker for managing the MVP launch roadmap; setup includes global npm installation, git hooks for automatic JSONL sync, MCP server integration with Claude Code, AGENTS.md workflow documentation, and .gitattributes for smart merging; created initial MVP roadmap with 23 tasks organized into 7 epics (pre-generated sample content, onboarding UX improvements, user guidance pulse points, free vs paid tier definition, flashcard improvements, analytics tracking, and final polish)
- **[feat]** Full sentence furigana support for SRS flashcards - flashcards now display furigana for entire sentences instead of just the target vocabulary word, improving reading comprehension and context understanding; added furiganaService using kuroshiro library for automatic furigana generation; implemented smart sentence parsing logic to correctly extract and render vocabulary words with split furigana annotations (e.g., 予[よ]定[てい]); created backfill script for existing cards; added comprehensive FlashCard test coverage; changed English translation toggle default to off for better learning flow; fixed CurrentTextDisplay container height jumping issue
